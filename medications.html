<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medications</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* ### Color Palette ### */
        body { background-color: #F3F9D2; /* Cream */ }
        
        /* Headings */
        h1, h2, h3, h4, h5, .card-title { color: #3D0B37; /* Dark purple */ }

        /* Navbar */
        .navbar-brand-green { background-color: #3D0B37; }
        .navbar-brand-green .nav-link, .navbar-brand-green .navbar-brand { color: #FFFFFF; }
        .navbar-brand-green .nav-link:hover, .navbar-brand-green .navbar-brand:hover { color: #F3F9D2; }

        /* Button Overrides */
        .btn-primary { background-color: #63264A; border-color: #63264A; }
        .btn-primary:hover { background-color: #3D0B37; border-color: #3D0B37; }
        
        /* Icon Colors */
        .med-icon-1 { color: #C0D684; }
        .med-icon-2 { color: #CBEAA6; }

        /* Inactive/Muted Styles */
        .btn-eligible { background-color: #e9ecef; border-color: #dee2e6; color: #6c757d; cursor: not-allowed; }
        
        .med-card-inactive { background-color: #f8f9fa; color: #6c757d; border: 1px solid #dee2e6; }
        .med-card-inactive .btn-refill { border-color: #ced4da; color: #6c757d; }

        /* Menu Dots */
        .btn-menu-dots { color: #6c757d; font-size: 1.2rem; }
        .btn-menu-dots:hover { color: #212529; }

        /* ### NEW STYLES FOR GRID LAYOUT ### */
        .card {
            border-radius: 15px; /* More rounded edges */
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px); /* Slight lift effect on hover */
            box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
        }
        
        /* Big Icons for the center of the box */
        .med-icon-large {
            font-size: 3.5rem;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-brand-green px-3">
        <a class="navbar-brand fw-bold" href="#">
            <i class="bi bi-activity me-2"></i>Winona College Care
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="#">Logout</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-search"></i></a></li>
            </ul>
        </div>
    </nav>

    <div class="container my-4">
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold m-0">My Prescriptions</h3>
            <button class="btn btn-success" type="button" data-bs-toggle="modal" data-bs-target="#requestModel">
                <i class="bi bi-plus-circle-fill me-2"></i>New Request
            </button>
        </div>

        <div id="medicationList" class="row row-cols-1 row-cols-md-2 row-cols-xl-4 g-4">

            <div class="col">
                <div class="card h-100 shadow-sm position-relative text-center p-3">
                    <div class="position-absolute top-0 end-0 p-2">
                        <div class="dropdown">
                            <a class="btn-menu-dots" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">View Details</a></li>
                                <li><a class="dropdown-item text-danger" href="#">Remove</a></li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="card-body d-flex flex-column align-items-center">
                        <i class="bi bi-capsule-pill med-icon-large med-icon-1"></i>
                        
                        <h5 class="card-title fw-bold mb-1">Cetirizine</h5>
                        <p class="text-muted small mb-3">120mg â€¢ 1x Daily</p>
                        
                        <span class="badge bg-light text-dark border mb-3">Allergies</span>
                        
                        <div class="mt-auto w-100">
                            <div class="d-flex justify-content-between small text-muted mb-2">
                                <span>Refills: <strong>2</strong></span>
                                <span>Due: <strong>Now</strong></span>
                            </div>
                            <button class="btn btn-primary w-100 rounded-pill">Refill Now</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card h-100 shadow-sm position-relative text-center p-3">
                    <div class="position-absolute top-0 end-0 p-2">
                        <div class="dropdown">
                            <a class="btn-menu-dots" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">View Details</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="card-body d-flex flex-column align-items-center">
                        <i class="bi bi-prescription2 med-icon-large med-icon-2"></i>
                        
                        <h5 class="card-title fw-bold mb-1">Lisinopril</h5>
                        <p class="text-muted small mb-3">Oral Liquid</p>
                        
                        <span class="badge bg-light text-dark border mb-3">Blood Pressure</span>
                        
                        <div class="mt-auto w-100">
                            <div class="d-flex justify-content-between small text-muted mb-2">
                                <span>Refills: <strong>1</strong></span>
                                <span>Due: <strong>11/28</strong></span>
                            </div>
                            <button class="btn btn-eligible w-100 rounded-pill" disabled>Wait</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card h-100 med-card-inactive position-relative text-center p-3">
                    <div class="position-absolute top-0 end-0 p-2">
                        <div class="dropdown">
                            <a class="btn-menu-dots" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Details</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="card-body d-flex flex-column align-items-center">
                        <i class="bi bi-capsule med-icon-large text-secondary"></i>
                        
                        <h5 class="card-title fw-bold mb-1">Amoxicillin</h5>
                        <p class="text-muted small mb-3">500mg</p>
                        
                        <span class="badge bg-light text-secondary border mb-3">Antibiotic</span>
                        
                        <div class="mt-auto w-100">
                            <div class="text-center small text-muted mb-2">
                                <span>Completed: 08/20/25</span>
                            </div>
                            <button class="btn btn-outline-secondary w-100 rounded-pill btn-sm" disabled>Archived</button>
                        </div>
                    </div>
                </div>
            </div>

        </div> </div> <div class="modal fade" id="requestModel" tabindex="-1" aria-labelledby="requestModelLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="requestModelLabel">Request New Medication</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="requestForm">
                        <div class="mb-3">
                            <label for="medName" class="form-label">Medication Name</label>
                            <input type="text" class="form-control" id="medName" placeholder="e.g., Tylenol" required>
                        </div>
                        <div class="mb-3">
                            <label for="medDosage" class="form-label">Dosage</label>
                            <input type="text" class="form-control" id="medDosage" placeholder="e.g., 500mg">
                        </div>
                        <div class="mb-3">
                            <label for="medReason" class="form-label">Reason for Request</label>
                            <textarea class="form-control" id="medReason" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveMedBtn">Submit Request</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    document.getElementById('saveMedBtn').addEventListener('click', function() {
        const medName = document.getElementById('medName').value;
        const medDosage = document.getElementById('medDosage').value;
        const medReason = document.getElementById('medReason').value;

        if (medName === "") { alert("Please enter a medication name."); return; }

        const today = new Date().toLocaleDateString();

        // ### UPDATED HTML FOR THE NEW TALL CARD LAYOUT ###
        const newCardHTML = `
        <div class="col">
            <div class="card h-100 shadow-sm position-relative text-center p-3">
                <div class="position-absolute top-0 end-0 p-2">
                    <div class="dropdown">
                        <a class="btn-menu-dots" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item text-danger" href="#">Cancel Request</a></li>
                        </ul>
                    </div>
                </div>

                <div class="card-body d-flex flex-column align-items-center">
                    <i class="bi bi-hourglass-split med-icon-large text-warning"></i>
                    
                    <h5 class="card-title fw-bold mb-1">${medName}</h5>
                    <p class="text-muted small mb-3">${medDosage || 'Dosage Pending'}</p>
                    
                    <span class="badge bg-warning text-dark border mb-3">Reviewing</span>
                    
                    <div class="mt-auto w-100">
                         <div class="text-center small text-muted mb-2">
                            <span>Requested: ${today}</span>
                        </div>
                        <button class="btn btn-secondary w-100 rounded-pill" disabled>Processing</button>
                    </div>
                </div>
            </div>
        </div>
        `;

        const listContainer = document.getElementById('medicationList');
        if(listContainer) {
             listContainer.insertAdjacentHTML('afterbegin', newCardHTML);
        }

        // Close Modal and Reset
        const modalElement = document.getElementById('requestModel');
        const modalInstance = bootstrap.Modal.getInstance(modalElement);
        modalInstance.hide();
        document.getElementById('requestForm').reset();
    });

    // REMOVE FUNCTIONALITY
    document.getElementById('medicationList').addEventListener('click', function(event) {
        if (event.target.innerText === 'Remove' || event.target.innerText === 'Cancel Request') {
            event.preventDefault();
            // We need to find the "col" to remove, not just the card, 
            // otherwise the empty column space remains in the grid.
            const colToDelete = event.target.closest('.col');
            
            if (colToDelete && confirm("Are you sure you want to remove this?")) {
                 colToDelete.remove();
            }
        }
    });
    </script>
</body>
</html>